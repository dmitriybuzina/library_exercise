.show-book
  %h1
    =@book.name
  .row
    .col-6
      .progress
        .progress-bar.bg-success{ :id => "progress_first", "aria-valuemax" => "100", "aria-valuemin" => "0", "aria-valuenow" => "25", :role => "progressbar"}
        .progress-bar.bg-danger{:id => "progress_second", "aria-valuemax" => "100", "aria-valuemin" => "0", "aria-valuenow" => "25", :role => "progressbar"}
      .container-like
        -if @book.is_liked_by(current_user.id)
          -if @old_like.liking
            =link_to image_tag('like.png', size: '40x40', style: 'float: left', class: 'like-dislike'), delete_like_book_path(book_id: @book.id, user_id: current_user.id), method: :delete, remote: true
            =link_to image_tag('dislike_before.png', size: '40x40', style: 'float: right', class: 'like-dislike'), new_like_book_path(book_id: @book.id, user_id: current_user.id, liking:false), method: :post, remote: true
          -else
            =link_to image_tag('like_before.png', size: '40x40', style: 'float: left', class: 'like-dislike'), new_like_book_path(book_id: @book.id, user_id: current_user.id, liking: true), method: :post, remote: true
            =link_to image_tag('dislike.png', size: '40x40', style: 'float: right', class: 'like-dislike'), delete_like_book_path(book_id: @book.id, user_id: current_user.id), method: :delete, remote: true
        -else
          =link_to image_tag('like_before.png', size: '40x40', style: 'float: left', class: 'like-dislike'), new_like_book_path(book_id: @book.id, user_id: current_user.id, liking: true), method: :post, remote: true
          =link_to image_tag('dislike_before.png', size: '40x40', style: 'float: right', class: 'like-dislike'), new_like_book_path(book_id: @book.id, user_id: current_user.id, liking:false), method: :post, remote: true
    .col-6
      .book-action
        =button_to "#{ @book.status ? 'Take' : @book.is_taken_by(current_user.id) ? 'Return' : 'Busy'}", take_return_book_path(@book), id: 'action-book', method: :post, remote: true, class: "btn btn-#{ @book.status ? 'primary' : 'secondary' }"
        -#-if(!@book.status)
        -#  -if(@book.is_taken_by(current_user.id))
        -#    =button_to 'Return', return_book_path(@book.id, user_id: current_user.id), remote: true, class: 'btn btn-primary button-take', id: 'button-return'
        -#  -else
        -#    =button_to 'Busy', class: 'btn btn-primary button-take'
        -#-else
        -#  =button_to 'Take', take_book_path(@book.id, user_id: current_user.id),remote: true, method: :post, class: 'btn btn-primary button-take', id: 'button-take'
  .image-description
    .row
      .col-6
        -if(@book.image)
          =image_tag(@book.image, class: 'book-image')
        -else
          =image_tag('book-no-image.png')
      .col-6
        .description
          %p
            =@book.description
  #book-comments
    =render @book.comments
  =render 'comments/form'

  -if(@histories.length != 0)
    #book-histories
      .row
        .col-12.col-sm-12
          =render 'books/histories', histories: @histories

